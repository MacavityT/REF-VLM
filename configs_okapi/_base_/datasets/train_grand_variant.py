grand_train_common_cfg = dict(
    type='GranDDataset',
    text_path=r'/data/Aaronzhu/GranD/GranD/Jsons',
    image_folder=r'/data/Aaronzhu/SA-1B/OpenDataLab___SA-1B/images',
    stage=2,
)

train_grand_variant = dict(
    grand_c=dict(
        **grand_train_common_cfg, 
        version='c', 
        use_floating_objects=True,
        template_name=r"image_cap",
        map_placeholders=None,
        placeholders=('<image>',),
        offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/offline_single_task/offline_caption',
    ),
    grand_d=dict(
        **grand_train_common_cfg, 
        version='d', 
        use_floating_objects=True,
        template_name=r"DET",
        map_placeholders=dict(
            output=["<boxes>"],
        ),         
        placeholders=('<image>',),
        offline_processed_text_folder='',
    ),
    grand_s=dict(
        **grand_train_common_cfg, 
        version='s', 
        use_floating_objects=True,
        template_name=r"SEG",
        map_placeholders=dict(
            output=["<masks>"],
        ), 
        placeholders=('<image>',),
        offline_processed_text_folder='',
    ),
    grand_cond_d=dict(
        **grand_train_common_cfg, 
        version='cond_d', 
        max_conv_length=6,
        template_name=r"Cond_DET",
        map_placeholders=dict(
            output=["<boxes>"],
        ),     
        placeholders=('<image>','<cls>'),
        offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/offline_single_task/offline_cond_det',        
    ),
    grand_cond_s=dict(
        **grand_train_common_cfg,
        version='cond_s', 
        max_conv_length=6,
        template_name=r"Cond_SEG",
        map_placeholders=dict(
            output=["<masks>"],
        ), 
        placeholders=('<image>','<cls>'),
        offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/offline_single_task/offline_cond_seg',        
    ),
    grand_r_det=dict(
        **grand_train_common_cfg, 
        version='r_det', 
        max_conv_length=6,
        use_floating_objects=True,
        template_name=r"REC",
        map_placeholders=dict(
            output=["<boxes>"],
        ),     
        placeholders=('<image>','<expr>'),
        offline_processed_text_folder='',
    ),
    grand_r_seg=dict(
        **grand_train_common_cfg, 
        version='r_seg', 
        use_floating_objects=True,
        template_name=r"RES",
        map_placeholders=dict(
            output=["<masks>"],
        ), 
        placeholders=('<image>','<expr>'),
        offline_processed_text_folder='',
    ),
    grand_re_det=dict(
        **grand_train_common_cfg, 
        version='re_det', 
        use_floating_objects=True,
        max_conv_length=6,
        template_name=r"REG",
        map_placeholders=dict(
            input=["<boxes>"],
        ),     
        placeholders=('<image>','<objs>'),
        offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/offline_single_task/offline_re_det_noref',
    ),
    grand_re_seg=dict(
        **grand_train_common_cfg, 
        version='re_seg',
        max_conv_length=6,
        use_floating_objects=True,
        template_name=r"REG_SEG",
        map_placeholders=dict(
            input=["<masks>"],
        ), 
        placeholders=('<image>',"<masks>"),
        offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/offline_single_task/offline_re_seg_noref',
    ),

    grand_c_d=dict(
        **grand_train_common_cfg, 
        version='c_d', 
        use_floating_objects=True,
        template_name=r"flickr30k",
        map_placeholders=dict(
            output=["<boxes>"],
        ),     
        placeholders=('<image>',),
        offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/offline_single_task/offline_gcg_det',
    ),
    grand_c_s=dict(
        **grand_train_common_cfg, 
        version='c_s', 
        use_floating_objects=True,
        template_name=r"flickr30k_SEG",
        map_placeholders=dict(
            output=["<masks>"],
        ),     
        placeholders=('<image>',),
        offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/offline_single_task/offline_gcg_seg',
    ),
    grand_d_s=dict(
        **grand_train_common_cfg, 
        version='d_s', 
        use_floating_objects=False,
        template_name=["DET","SEG"],
        map_placeholders=dict(
            output=["<boxes>","<masks>"],
        ),     
        placeholders=[('<image>',),('<image>',)],
        offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/offline_single_task/offline_det_seg',
    ),
    grand_mix = dict(
        **grand_train_common_cfg, 
        version='mix', 
        use_floating_objects=True,
        max_conv_length=2,
        template_name=["image_cap","DET","SEG","Cond_DET","Cond_SEG","REC","RES","REG","REG_SEG","flickr30k","flickr30k_SEG"],
        map_placeholders=dict(
            input=["<boxes>","<masks>"],
            output=["<boxes>","<masks>"],
        ),             
        placeholders=[('<image>',),
                      ('<image>',),('<image>',),
                      ('<image>','<cls>'),('<image>','<cls>'),
                      ('<image>','<expr>'),('<image>','<expr>'),
                      ('<image>','<objs>'),('<image>',"<masks>"),
                      ('<image>',),('<image>',)],
        # offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/grand_mix_offline',
        offline_processed_text_folder='/data/Aaronzhu/GranD/GranD/offline_ref_mix',
    )
)